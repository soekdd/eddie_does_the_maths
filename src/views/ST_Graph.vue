<template>
<svg width="100%" height="100%" viewBox="0 0 1749 1241" version="1.1"
    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    xml:space="preserve" xmlns:serif="http://www.serif.com/"
    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;">
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.770109,-0.637913,0.637913,0.770109,663.477571,599.836719)">Fahrer nimmt</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.770109,-0.637913,0.637913,0.770109,680.069552,640.202168)">nur Fin-Markka</text>
        </g>
    </g>
    <g>
        <path d="M327.813,540.335L354.33,531.496L345.491,558.013C345.491,549.174 336.652,540.335 327.813,540.335Z" style="fill:rgb(35,31,32);"/>
        <path d="M118.109,767.717C118.109,767.717 289.243,596.583 340.188,545.638" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1035.319,291.323L1062.989,295.276L1043.229,315.04C1047.179,307.134 1043.229,295.276 1035.319,291.323Z" style="fill:rgb(35,31,32);"/>
        <path d="M354.33,531.496C354.33,531.496 931.275,339.181 1044.019,301.6" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
        <Katex width="400" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,650,134)" :tex="`\\frac{${model.ndd}}{60}*\\frac{${model.ndd}}{60}+\\frac{${model.dd}}{60}\\left(1+\\frac{${model.ndd}}{60}\\right)*\\left(${model.paa}\\%*${model.prr}\\%+${model.pnaa}\\%\\right)`" />
        <Katex width="400" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,1093.077407,1155.048375)" :tex="`\\frac{${model.dd}}{60}\\left(1+ \\frac{${model.ndd}}{60}\\right)*${model.paa}\\%*${model.pnrr}\\%`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,433,652)" :tex="`\\frac{${model.dd}}{60}`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,350,800)" :tex="`\\frac{${model.dd}}{60}`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,100,500)" :tex="`\\frac{${model.ndd}}{60}`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,600,320)" :tex="`\\frac{${model.ndd}}{60}`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,860,1020)" :tex="`${model.pnrr}\\%`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,820,620)" :tex="`${model.prr}\\%`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,620,840)" :tex="`${model.paa}\\%`" />
        <Katex width="40" height="50" as="foreignObject" x="0px" y="0px" transform="matrix(3,0,0,3,620,470)" :tex="`${model.pnaa}\\%`" />
    </g>
    <g>
        <path d="M593.412,831.481L590.552,648.105" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.16px;"/>
    </g>
    <g>
        <path d="M767.717,177.165L767.717,59.055" style="fill:none;stroke:rgb(35,31,32);stroke-width:2.64px;" transform="matrix(2,0,0,1,-472.441,826.772)"/>
    </g>
    <g>
        <path d="M1062.993,477.128L1062.993,240.908" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.16px;"/>
    </g>
    <g>
        <path d="M580.868,685.185L593.411,710.163L565.902,705.211C574.65,703.945 582.133,693.933 580.868,685.185Z" style="fill:rgb(35,31,32);"/>
        <path d="M354.33,531.496C354.33,531.496 523.827,658.162 577.39,698.191" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M815.53,867.907L829.632,892.04L801.865,888.842C810.515,887.024 817.348,876.557 815.53,867.907Z" style="fill:rgb(35,31,32);"/>
        <path d="M591.936,736.883C591.936,736.883 758.745,845.767 812.885,881.107" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1035.71,360.392L1062.99,354.333L1051.47,379.797C1052.38,371.005 1044.5,361.303 1035.71,360.392Z" style="fill:rgb(35,31,32);"/>
        <path d="M591.982,736.913C591.982,736.913 966.043,433.08 1047.47,366.942" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1156.1,341.831L1181.1,354.331L1156.1,366.831C1162.35,360.581 1162.35,348.081 1156.1,341.831Z" style="fill:rgb(35,31,32);"/>
        <path d="M1062.99,354.331L1161.1,354.331" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1156.1,932.382L1181.1,944.882L1156.1,957.382C1162.35,951.132 1162.35,938.632 1156.1,932.382Z" style="fill:rgb(35,31,32);"/>
        <path d="M1062.99,944.882L1161.1,944.882" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1041.43,927.097L1062.99,944.884L1035.83,951.46C1043.32,946.771 1046.12,934.589 1041.43,927.097Z" style="fill:rgb(35,31,32);"/>
        <path d="M826.772,890.534C826.772,890.534 986.942,927.386 1043.5,940.399" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1040.56,439.486L1062.99,422.806L1062.88,450.757C1060.12,442.36 1048.96,436.725 1040.56,439.486Z" style="fill:rgb(35,31,32);"/>
        <path d="M826.772,890.534C826.772,890.534 1010.75,526.257 1053.98,440.658" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M568.535,759.679L593.41,772.426L568.287,784.677C574.599,778.49 574.723,765.99 568.535,759.679Z" style="fill:rgb(35,31,32);"/>
        <path d="M118.109,767.717C118.109,767.717 483.148,771.333 573.411,772.227" style="fill:none;stroke:rgb(35,31,32);stroke-width:4.17px;"/>
    </g>
    <g>
        <path d="M1370.348,311.58C1352.502,311.58 1337.983,326.1 1337.983,343.946C1337.983,361.792 1352.502,376.312 1370.348,376.312C1388.195,376.312 1402.714,361.792 1402.714,343.946C1402.714,326.1 1388.195,311.58 1370.348,311.58ZM1370.348,371.277C1355.279,371.277 1343.018,359.016 1343.018,343.946C1343.018,328.875 1355.279,316.614 1370.348,316.614C1385.42,316.614 1397.679,328.875 1397.679,343.946C1397.679,359.016 1385.42,371.277 1370.348,371.277Z" style="fill-rule:nonzero;"/>
        <path d="M1254.408,396.477C1254.408,414.325 1268.927,428.843 1286.773,428.843C1304.621,428.843 1319.139,414.325 1319.139,396.477C1319.139,378.633 1304.621,364.113 1286.773,364.113C1268.927,364.113 1254.408,378.633 1254.408,396.477ZM1286.773,369.147C1301.843,369.147 1314.104,381.408 1314.104,396.477C1314.104,411.549 1301.843,423.808 1286.773,423.808C1271.702,423.808 1259.443,411.549 1259.443,396.477C1259.443,381.408 1271.702,369.147 1286.773,369.147Z" style="fill-rule:nonzero;"/>
        <path d="M1370.108,296.577C1367.582,296.523 1365.172,296.728 1362.861,297.094L1357.248,288.696C1355.794,286.524 1353.584,285.047 1351.023,284.539C1348.462,284.027 1345.854,284.549 1343.683,286.001L1339.086,289.075L1334.385,282.402L1334.89,281.239C1336.7,277.071 1334.781,272.207 1330.613,270.397L1319.827,265.714C1317.806,264.837 1315.566,264.8 1313.518,265.607C1311.471,266.416 1309.86,267.973 1308.984,269.992L1307.614,273.145L1307.614,273.147C1307.289,273.897 1307.124,274.671 1307.03,275.445C1307.027,275.441 1307.025,275.438 1307.022,275.435L1304.592,273.003C1303.035,271.445 1300.965,270.59 1298.764,270.59C1296.562,270.59 1294.493,271.445 1292.935,273.003L1284.621,281.317C1283.064,282.874 1282.208,284.943 1282.208,287.145C1282.208,289.347 1283.066,291.416 1284.621,292.974L1287.051,295.404C1287.077,295.429 1287.107,295.446 1287.132,295.469L1284.888,295.469C1280.344,295.469 1276.646,299.166 1276.646,303.711L1276.646,315.47C1276.646,319.721 1279.894,323.19 1284.032,323.624L1284.032,331.923L1278.162,331.923C1272.77,331.923 1268.383,336.31 1268.383,341.702L1268.383,352.766C1251.289,359.887 1239.222,376.726 1239.222,396.37C1239.222,422.431 1260.423,443.633 1286.484,443.633C1312.543,443.633 1333.746,422.431 1333.746,396.37C1333.746,377.037 1322.057,360.412 1305.393,353.1L1305.393,341.702C1305.393,336.31 1301.006,331.923 1295.614,331.923L1289.067,331.923L1289.067,323.636C1293.261,323.255 1296.568,319.761 1296.568,315.47L1296.568,303.711C1296.568,301.343 1295.55,299.22 1293.945,297.714C1295.741,297.483 1297.408,296.706 1298.708,295.404L1307.022,287.09C1308.383,285.73 1309.132,284.005 1309.34,282.228C1310.056,282.95 1310.905,283.56 1311.894,283.99L1322.678,288.672C1323.732,289.129 1324.845,289.357 1325.959,289.357C1326.981,289.357 1328.006,289.166 1328.986,288.778C1329.958,288.394 1330.822,287.831 1331.564,287.142L1334.899,291.874L1329.176,295.701C1327.003,297.152 1325.526,299.362 1325.018,301.925C1324.509,304.488 1325.028,307.094 1326.479,309.266L1331.422,316.658C1328.173,321.384 1322.796,331.126 1322.796,343.838C1322.796,369.898 1343.998,391.098 1370.057,391.098C1396.12,391.098 1417.322,369.898 1417.322,343.838C1417.322,316.108 1392.909,297.011 1370.108,296.577ZM1300.358,341.702L1300.358,351.189L1300.355,351.189L1300.355,356.608C1316.783,362.356 1328.602,378.003 1328.602,396.37C1328.602,419.596 1309.707,438.491 1286.484,438.491C1263.259,438.491 1244.364,419.596 1244.364,396.37C1244.364,377.706 1256.57,361.849 1273.416,356.336L1273.416,353.941L1273.418,353.941L1273.418,341.702C1273.418,339.086 1275.546,336.958 1278.162,336.958L1295.614,336.958C1298.23,336.958 1300.358,339.086 1300.358,341.702ZM1291.534,315.47C1291.534,317.239 1290.096,318.677 1288.327,318.677L1284.888,318.677C1283.119,318.677 1281.681,317.239 1281.681,315.47L1281.681,303.711C1281.681,301.944 1283.119,300.504 1284.888,300.504L1288.327,300.504C1290.096,300.504 1291.534,301.944 1291.534,303.711L1291.534,315.47ZM1303.463,283.53L1295.149,291.844C1293.937,293.057 1291.824,293.057 1290.614,291.844L1288.181,289.412C1286.931,288.162 1286.931,286.126 1288.181,284.876L1296.495,276.562C1297.1,275.956 1297.906,275.624 1298.764,275.624C1299.621,275.624 1300.427,275.956 1301.033,276.562L1303.463,278.994C1304.713,280.244 1304.713,282.28 1303.463,283.53ZM1328.903,282.387C1328.562,283.174 1327.934,283.78 1327.139,284.094C1326.342,284.41 1325.471,284.395 1324.684,284.054L1313.899,279.372C1312.277,278.667 1311.528,276.774 1312.233,275.151L1313.602,271.998C1313.943,271.212 1314.571,270.605 1315.368,270.291C1316.167,269.977 1317.036,269.994 1317.821,270.333L1328.607,275.015C1330.23,275.72 1330.977,277.613 1330.272,279.234L1328.903,282.387ZM1370.057,385.956C1346.834,385.956 1327.939,367.061 1327.939,343.838C1327.939,329.746 1335.61,319.466 1337.149,317.548C1337.2,317.485 1337.389,317.257 1337.649,316.957L1337.45,316.655L1337.466,316.643L1330.665,306.468C1329.96,305.414 1329.708,304.149 1329.955,302.907C1330.203,301.663 1330.918,300.591 1331.974,299.886L1346.482,290.186C1347.536,289.481 1348.809,289.234 1350.041,289.478C1351.285,289.724 1352.357,290.441 1353.06,291.493L1357.583,298.257C1357.58,298.258 1357.576,298.258 1357.573,298.26L1360.584,302.798C1363.308,302.135 1366.209,301.71 1369.309,301.71C1369.54,301.71 1369.774,301.714 1370.009,301.717C1390.374,302.106 1412.179,319.125 1412.179,343.838C1412.179,367.061 1393.284,385.956 1370.057,385.956Z" style="fill-rule:nonzero;"/>
    </g>
    <g>
        <path d="M1390.605,1017.091L1389.804,1017.091L1389.804,931.512C1389.804,905.113 1370.157,883.22 1344.718,879.677C1345.302,878.551 1345.635,877.275 1345.635,875.922C1345.635,871.416 1341.969,867.75 1337.462,867.75C1335.249,867.75 1333.176,868.62 1331.627,870.201C1330.675,871.172 1330.69,872.731 1331.661,873.682C1332.632,874.634 1334.191,874.619 1335.142,873.648C1335.758,873.019 1336.582,872.673 1337.462,872.673C1339.253,872.673 1340.711,874.131 1340.711,875.922C1340.711,877.714 1339.253,879.171 1337.462,879.171C1309.426,879.171 1286.47,901.328 1285.18,929.051L1247.679,929.051C1246.319,929.051 1245.217,930.153 1245.217,931.512L1245.217,975.533C1245.217,976.892 1246.319,977.994 1247.679,977.994L1285.121,977.994L1285.121,1017.091L1284.319,1017.091C1282.96,1017.091 1281.858,1018.193 1281.858,1019.553C1281.858,1020.912 1282.96,1022.014 1284.319,1022.014L1390.605,1022.014C1391.965,1022.014 1393.067,1020.912 1393.067,1019.553C1393.067,1018.193 1391.965,1017.091 1390.605,1017.091ZM1364.928,973.071L1309.996,973.071L1309.996,933.974L1364.928,933.974L1364.928,973.071ZM1337.462,884.151C1337.981,884.547 1340.282,886.883 1342.351,898.016C1343.932,906.524 1344.85,917.465 1344.964,929.051L1329.961,929.051C1330.075,917.465 1330.992,906.524 1332.573,898.016C1334.642,886.883 1336.944,884.547 1337.462,884.151ZM1349.888,929.051C1349.767,916.492 1348.728,904.749 1346.93,895.759C1346.075,891.485 1345.114,888.074 1344.022,885.483C1348.659,887.477 1352.956,891.58 1356.514,897.509C1361.593,905.974 1364.535,917.096 1364.891,929.05L1349.888,929.05L1349.888,929.051ZM1330.902,885.483C1329.811,888.074 1328.85,891.485 1327.995,895.76C1326.197,904.75 1325.157,916.492 1325.037,929.051L1310.034,929.051C1310.389,917.097 1313.332,905.974 1318.411,897.509C1321.968,891.58 1326.266,887.478 1330.902,885.483ZM1309.996,977.994L1325.025,977.994L1325.025,1017.091L1309.996,1017.091L1309.996,977.994ZM1329.948,977.994L1344.977,977.994L1344.977,1017.091L1329.948,1017.091L1329.948,977.994ZM1349.9,977.994L1364.928,977.994L1364.928,1017.091L1349.9,1017.091L1349.9,977.994ZM1369.852,933.974L1384.88,933.974L1384.88,1017.091L1369.852,1017.091L1369.852,933.974ZM1384.817,929.051L1369.816,929.051C1369.454,916.208 1366.262,904.188 1360.735,894.976C1359.021,892.118 1357.137,889.621 1355.118,887.506C1371.823,894.232 1383.848,910.204 1384.817,929.051ZM1250.141,933.974L1265.169,933.974L1265.169,973.071L1250.141,973.071L1250.141,933.974ZM1270.093,973.071L1270.093,933.974L1285.121,933.974L1285.121,973.071L1270.093,973.071ZM1290.045,977.994L1297.688,977.994C1299.048,977.994 1300.15,976.892 1300.15,975.533C1300.15,974.173 1299.048,973.071 1297.688,973.071L1290.045,973.071L1290.045,933.974L1297.688,933.974C1299.048,933.974 1300.15,932.872 1300.15,931.512C1300.15,930.153 1299.048,929.051 1297.688,929.051L1290.108,929.051C1291.077,910.204 1303.102,894.232 1319.807,887.506C1317.788,889.621 1315.904,892.118 1314.189,894.976C1308.311,904.774 1305.073,917.749 1305.073,931.512L1305.073,1017.091L1290.045,1017.091L1290.045,977.994Z" style="fill-rule:nonzero;"/>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(1,0,0,1,154.2973,807.947)">Bus kommt</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(1,0,0,1,157.0153,849.617)">gen Süden</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.950665,-0.310219,0.310219,0.950665,415.457761,446.245192)">Kein Bus</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.950665,-0.310219,0.310219,0.950665,408.996725,492.186008)">gen Norden</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.707725,-0.706488,0.706488,0.707725,136.281257,675.130243)">Kein Bus</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.707725,-0.706488,0.706488,0.707725,155.865541,714.458989)">gen Süden</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.84,0.545195,-0.545195,0.84,656.587123,714.270666)">Fahrer nimmt</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.84,0.545195,-0.545195,0.84,671.145095,773.445643)">D-Mark</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.84,0.545195,-0.545195,0.84,656.587123,714.270666)">Fahrer nimmt</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.84,0.545195,-0.545195,0.84,671.145095,773.445643)">D-Mark</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.449002,-0.893531,0.893531,0.449002,944.202831,736.237131)">Mielke</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.449002,-0.893531,0.893531,0.449002,962.705701,792.221583)">schnappt zu</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.974353,0.225025,-0.225025,0.974353,822.996207,924.020904)">Mielke verpasst</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.974353,0.225025,-0.225025,0.974353,892.143498,982.757184)">mich</text>
        </g>
    </g>
    <g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.797588,0.603202,-0.603202,0.797588,452.818337,534.137108)">Bus kommt</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:33.333px;fill:rgb(35,31,32);" transform="matrix(0.797588,0.603202,-0.603202,0.797588,424.691157,565.10999)">gen Norden</text>
        </g>
    </g>
    <g>
        <path id="MJX-60-NCM-N-3D" d="M1492.622,352.823L1446.013,352.823C1444.807,352.823 1444.203,353.426 1444.203,354.557C1444.203,355.689 1444.807,356.292 1446.013,356.292L1492.622,356.292C1493.828,356.292 1494.432,355.689 1494.432,354.557C1494.432,353.652 1493.602,352.823 1492.622,352.823M1492.622,367.001L1446.013,367.001C1444.807,367.001 1444.203,367.605 1444.203,368.736C1444.203,369.867 1444.807,370.47 1446.013,370.47L1492.622,370.47C1493.828,370.47 1494.432,369.867 1494.432,368.736C1494.432,367.755 1493.602,367.001 1492.622,367.001Z" style="fill-rule:nonzero;"/>
    </g>
    <g>
        <path id="MJX-59-NCM-N-3D" d="M1492.622,943.374L1446.013,943.374C1444.807,943.374 1444.203,943.977 1444.203,945.108C1444.203,946.24 1444.807,946.843 1446.013,946.843L1492.622,946.843C1493.828,946.843 1494.432,946.24 1494.432,945.108C1494.432,944.203 1493.602,943.374 1492.622,943.374M1492.622,957.552L1446.013,957.552C1444.807,957.552 1444.203,958.156 1444.203,959.287C1444.203,960.418 1444.807,961.021 1446.013,961.021L1492.622,961.021C1493.828,961.021 1494.432,960.418 1494.432,959.287C1494.432,958.306 1493.602,957.552 1492.622,957.552Z" style="fill-rule:nonzero;"/>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:45.833px;fill:rgb(35,31,32);" transform="matrix(1.000001,0,0,1.000001,1304.668534,513.048375)">Misserfolg</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:64px;fill:rgb(35,31,32);" transform="matrix(1.000001,0,0,1.000001,1523.724433,378.745043)">{{model.failure}}%</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:64px;fill:rgb(35,31,32);" transform="matrix(1.000001,0,0,1.000001,1523.724433,973.296043)">{{model.freedom}}%</text>
        </g>
        <g>
            <text x="0px" y="0px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:45.833px;fill:rgb(35,31,32);" transform="matrix(1.000001,0,0,1.000001,1304.310463,826.772432)">Freiheit</text>
        </g>
    </g>
</svg>
</template>

<script setup>
import { computed } from 'vue'

const props = defineProps({
  busPerHour: { type: [Number, String], required: true },
  standMinutes: { type: [Number, String], required: true },
  a: { type: [Number, String], required: true },
  r: { type: [Number, String], required: true },
})

function parseMaybeFloat(v) {
  if (typeof v === 'number') return Number.isFinite(v) ? v : null
  const s = String(v).trim().replace(',', '.')
  if (!s) return null
  if (!/^[-+]?(\d+(\.\d+)?|\.\d+)$/.test(s)) return null
  const n = Number(s)
  return Number.isFinite(n) ? n : null
}

function in01(n) {
  return typeof n === 'number' && Number.isFinite(n) && n >= 0 && n <= 1
}

function fmtPct(n, digits = 0) {
  if (!Number.isFinite(n)) return '–'
  return `${(n * 100).toFixed(digits).replace('.', ',')}%`
}

const model = computed(() => {
  const f = parseMaybeFloat(props.busPerHour)
  const t = parseMaybeFloat(props.standMinutes)
  const aa = parseMaybeFloat(props.a)
  const rr = parseMaybeFloat(props.r)

  // p per direction (Sued/Nord) from f (buses/h per direction) and t (stand minutes).
  const dd = f === null || t === null ? null : (f * t) 
  const ndd = ( 60 - dd );
  const naa = ( 1 - aa );
  const nrr = ( 1 - rr );
  const paa = Math.round(aa*100);
  const pnaa = Math.round(naa*100);
  const prr = Math.round(rr*100);
  const pnrr = Math.round(nrr*100);

  const fix = {dd, aa, rr, ndd, naa, nrr, paa, pnaa, prr, pnrr}

  // Return parsed values even on invalid input so template/debug can still show them.
  if ([f, t, aa, rr].some((n) => n === null)) {
    return { ok: false, ...fix, message: 'Bitte Zahlen eingeben. Tipp: 0,65 geht auch.' }
  }
  if (f < 0 || t < 0) {
    return { ok: false, ...fix, message: 'Busse/Standszeit muessen >= 0 sein.' }
  }
  if (t > 60) {
    return { ok: false, ...fix, message: 'Standzeit muss <= 60 Minuten sein (wir rechnen "pro Stunde").' }
  }
  if (![aa, rr].every(in01)) {
    return { ok: false, ...fix, message: 'a und r muessen im Intervall [0,1] liegen.' }
  }

  const freedom = Math.round(1000*(dd/60)*(1+ndd/60)*aa*(1-rr))/10;
  const failure = 100 - freedom;

  return {
    ok: true,
    ...fix,
    freedom,
    failure,
  }
})

const ariaLabel = computed(() => {
  if (!model.value.ok) return 'Entscheidungsbaum (unguenltige Eingaben)'
  return `Entscheidungsbaum: Freiheit ${fmtPct(model.value.freedom, 1)}, Misserfolg ${fmtPct(model.value.failure, 1)}`
})
</script>

<style scoped>
.stGraph {
  display: block;
  width: 100%;
  height: auto;
  border-radius: 12px;
  overflow: hidden;

  /* Theme-aware colors (Vuetify exposes RGB tuples in CSS variables). */
  --graph-bg: rgb(var(--v-theme-surface, 255, 255, 255));
  --graph-text: rgb(var(--v-theme-on-surface, 17, 17, 17));
  --graph-ink: rgba(var(--v-theme-on-surface, 17, 17, 17), 0.92);
  --graph-muted: rgba(var(--v-theme-on-surface, 17, 17, 17), 0.62);
}

.bg { fill: var(--graph-bg, #fff); }

.stEdges { color: var(--graph-ink, #111); }

.label { fill: var(--graph-text, #111); font: 18px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
.small { fill: var(--graph-text, #111); font: 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
.muted { fill: var(--graph-muted, #666); }
.equation { fill: var(--graph-text, #111); font: 36px system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-weight: 600; }

.big { fill: var(--graph-text, #111); font: 44px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-weight: 700; }
.outLabel { fill: var(--graph-text, #111); font: 22px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-weight: 600; }

.icon {
  stroke: var(--graph-ink, #111);
  stroke-width: 3;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* Text halo so labels stay readable on top of lines. */
.halo {
  paint-order: stroke;
  stroke: var(--graph-bg, #fff);
  stroke-width: 7px;
  stroke-linejoin: round;
}
</style>
